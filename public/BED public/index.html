<!-- Ezekiel Goh
P2205881
DIT/FT/1B/08 -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.108.0">
    <title>Homepage</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/headers/">
    <!-- <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;0,1000;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900;1,1000&display=swap"
        rel="stylesheet">

    <link href="index.css" rel="stylesheet">
    <link href="headers.css" rel="stylesheet">
    <!-- <link href="heroes.css" rel="stylesheet"> -->


</head>
<!-- header -->
<style>
    /* index.css */
    @media (min-width: 992px) {
        .rounded-lg-3 {
            border-radius: .3rem;
        }
    }

    .search_box {
        align-items: center;
        justify-content: center;
    }

    #priceRange {
        height: 3.65em;
        border-radius: 5em 10em 10em 5em;
    }

    .form-select {
        color: aliceblue;
    }

    .input-group-text {
        color: aliceblue;
    }

    .form-control {
        color: aliceblue;
    }

    #filmCategory {
        background-color: rgb(217, 217, 217);
        border-radius: 10em 5em 5em 10em;
    }

    *:focus {
        outline-color: none;
    }

    /* header css */
    .form-control-dark {
        border-color: var(--bs-gray);
    }

    .form-control-dark:focus {
        border-color: #fff;
        box-shadow: 0 0 0 .25rem rgba(255, 255, 255, .25);
    }

    .text-small {
        font-size: 85%;
    }

    .dropdown-toggle {
        outline: 0;
    }

    .placeholder {
        color: white;
    }


    #searchBar.form-control::placeholder {
        color: rgb(170, 170, 170);
    }

    #ComFont {
        font-family: 'Nunito', sans-serif;
        /* font-weight: regular; */

    }

    .appLogo {
        margin-right: 2.7%;
    }

    #navBar {
        border-radius: 30px 30px 30px 30px;
        box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.31);
    }

    #navBarMovies {
        border-radius: 30px 30px 30px 30px;
        box-shadow: 2px 2px 10px rgba(128, 128, 128, 0.31);
    }

    #navBarButton {
        background-color: rgb(255, 255, 255);
        border-color: rgba(255, 255, 255, 0);
        border-radius: 100px;
    }
</style>

<body class="text-light" style="background-color: #000;">
    <div class="cover-container d-f w-100 h-100 p-3 mx-auto flex-column">

        <nav class="navbar navbar-expand-sm p-3 m-2 fixed-top" id="navBar" style="background-color: #000;"
            aria-label="Header">
            <div class="container-fluid">
                <a href="/" class="d-flex align-items-center mt-2 mb-2 mb-lg-0 pe-3 text-white text-decoration-none">
                    <img src="../assets/brand/SPdvdRentals.png" class="appLogo bi me-2" width="auto" height="32"
                        role="img" />
                </a>
                <button class="navbar-toggler btn btn-dark" id="navBarButton" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mt-2 me-auto mb-2 mb-lg-0" id="ComFont">
                        <li><a href="/" class="nav-link px-2 text-white fs-5">&nbspHomepage</a></li>
                        <li><a href="/searchResults" class="nav-link px-3 text-secondary fs-5" id="movieBtn">Movie
                                Titles</a>
                        </li>
                        <a id="AdminPrivilleges" class="nav-link px-3 text-warning fs-5"></a>
                    </ul>


                    <!-- <form class="col-12 col-lg-auto col-lg-5 mb-3 mb-lg-0 me-lg-3" role="search">
                                <label for="searchBar">Email address</label>
                                <input type="search" class="form-control form-control-dark text-bg-dark" id="searchBar"
                                    placeholder="Search for Movie titles, Categories and More" aria-label="Search">
                            </form> -->

                    <div class="text-end">
                        <a href="/login/"><button type="button" class="btn btn-warning me-2">Login</button></a>
                    </div>
                </div>
            </div>
    </div>
    </nav>

    <main>
        <!-- <h1 class="visually-hidden">Heroes examples</h1> -->
        <div class="px-2 py-5 my-5 text-center">
            <img class="d-block mx-auto mb-4 my-5" src="../assets/brand/SPdvdRentals.png" alt="" width="auto"
                height="70">

            <!-- <h1 class="display-5 fw-bold">SP DVD Rental Store</h1> -->
            <form id="SearchEverything">
                <div class="search_box col-sm-6 m-auto rounded-5 p-3 mb-1" role="search">
                    <input type="search" class="form-control form-control-dark col-lg-7 p-3 text-black rounded-5"
                        id="title" placeholder="Search for" aria-label="Search" />
                </div>

                <div class="d-flex col-sm-6 m-auto">
                    <div class="dropdown col-sm-4 me-2">
                        <select class="form-select col-sm-6 m-auto p-3 mb-3 bg-dark" id="filmCategory"
                            aria-label="Default select example" placeholder="All categories">
                            <option></option>
                        </select>
                    </div>

                    <div class="col-sm-8 d-flex m-auto p-3 mb-3 ms-1 bg-dark border border-1" id="priceRange">
                        <span class="input-group-text bg-white bg-transparent border border-0">$</span>
                        <input type="text" class="form-control-dark bg-transparent text-light border border-0"
                            placeholder="Max Price" aria-label="Amount (to the nearest dollar)" id="maxRentalPrice">
                    </div>
                </div>





                <div class="col-lg-6 mx-auto">
                    <div id="ErrorMsg">

                    </div>
                    <p class="lead mb-4">Find all your favourite Movies and TV Shows Here!</p>
                    <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
                        <button type="submit" class="btn btn-outline-light rounded-5 btn-lg px-4 gap-3"
                            id="searchButton">Search!</button>
                    </div>
                </div>
            </form>
        </div>

    </main>
    </div>

    <!-- <script src="./header.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous">
        </script>
    <!-- <script src="../assets/dist/js/bootstrap.bundle.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        const baseUrl = "http://localhost:3000";
        const token = localStorage.getItem("token");
        const loggedInUserID = parseInt(localStorage.getItem("loggedInUserID"));

        if (token === null || isNaN(loggedInUserID)) {
            axios.get(`${baseUrl}/searchResults/categories/`)
                .then((response) => {
                    console.log(response.data)
                    const categories = response.data;
                    // append categories
                    categories.forEach((category) => {
                        const categories = `                
                    <option id="${category.category_id}">${category.name}</option>
                        `;

                        $("#filmCategory").append(categories);
                    })
                })


            $("#SearchEverything").submit((submit) => {
                // prevents page refresh
                submit.preventDefault();
                const title = $("#title").val();
                const filmCategory = $("#filmCategory").val();
                const maxRentalPrice = $("#maxRentalPrice").val();
                localStorage.setItem("title", title);
                localStorage.setItem("filmCategory", filmCategory);
                localStorage.setItem("maxRentalPrice", maxRentalPrice);

                // localStorage.setItem(response.data)

                const requestBody = {
                    title: title,
                    filmCategory: filmCategory,
                    maxRentalPrice: maxRentalPrice
                };
                console.log(title)
                console.log(filmCategory)
                console.log(maxRentalPrice)



                axios.get(`${baseUrl}/searchResults/`, { params: { title: title, filmCategory: filmCategory, maxRentalPrice: maxRentalPrice } }, requestBody)
                    .then((response) => {
                        console.log(response.data)
                        // localStorage.setItem("titleOutput", titleOutput);
                        if (response.data.length == 0) {
                            document.getElementById("films").innerHTML = ""
                            const titleNotFound = `
                        <p>Aw Snap! Movie title not found :(</p>
                        `;

                            $("#ErrorMsg").append(titleNotFound);
                        } else
                            window.location.href = "/searchResults/";
                        // console.log("hello")
                    })
                    .catch((error) => {
                        console.log(error);

                    });
            })
        } else {
            const AdminPrivilleges = `
            Add Actor
                        `;

            $("#AdminPrivilleges").append(AdminPrivilleges);
        }







    </script>


</body>

</html>